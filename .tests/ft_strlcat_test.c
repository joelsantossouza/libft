/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_strlcat_test.c                                  :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: joesanto <joesanto@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/09/28 10:31:08 by joesanto          #+#    #+#             */
/*   Updated: 2025/09/29 21:11:45 by joesanto         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "libft.h"
#include <atf-c/tc.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <bsd/string.h>
#include <atf-c.h>

#define NELEM(tab) (sizeof(tab) / sizeof(t_input))

#define RED			"\e[0;31m"
#define GREEN		"\e[0;32m"
#define RESET_COLOR	"\e[0m"
#define TEST_NULLS	1<<0

char	*tests_titles[] = {
	"Null Strings",
	"Empty Strings",
	"Dest Bigger Than Src",
	"Big Strings",
	"Src Bigger than Dest",
};
static int	i;

typedef struct s_input
{
	const char	*dst;
	size_t		dst_size;
	const char	*src;
	size_t		size;
}	t_input;

void	test(t_input tab[], size_t size)
{
	char	*expected_dst;
	char	*myown_dst;
	size_t	expected_ret;
	size_t	myown_ret;
	char	*color;

	printf("\n<test%02d> %s\n", i, tests_titles[i]);
	while (size--)
	{
		expected_dst = malloc(tab[size].dst_size);
		if (!expected_dst)
			return ;
		myown_dst = malloc(tab[size].dst_size);
		if (!myown_dst)
			return (free(expected_dst));

		strlcpy(expected_dst, tab[size].dst, tab[size].dst_size);
		strlcpy(myown_dst, tab[size].dst, tab[size].dst_size);

		expected_ret = strlcat(expected_dst, tab[size].src, tab[size].size);
		myown_ret = ft_strlcat(myown_dst, tab[size].src, tab[size].size);
		color = expected_ret == myown_ret && !strncmp(expected_dst, myown_dst, tab[size].size) ? GREEN : RED;

		printf("%s", color);
		printf("Input:   \t%s\n", tab[size].src);
		printf("Expected:\t(%lu) %.*s\n", expected_ret, (int) tab[size].size, expected_dst);
		printf("Output:  \t(%lu) %.*s\n", myown_ret, (int) tab[size].size, myown_dst);
		printf("%s", RESET_COLOR);

		ATF_CHECK(expected_ret == myown_ret && !strncmp(expected_dst, myown_dst, tab[size].size));
		printf("----------\n");

		free(expected_dst);
		free(myown_dst);
	}
}

void	test_nulls(t_input tab[], size_t size, int flags)
{
	char	*expected_dst;
	char	*myown_dst;
	size_t	expected_ret;
	size_t	myown_ret;
	char	*color;

	printf("{My Own Test}\n");
	while (size--)
	{
		if (flags & TEST_NULLS)
			expected_dst = myown_dst = 0;
		else
		{
			expected_dst = malloc(tab[size].dst_size);
			if (!expected_dst)
				return ;
			myown_dst = malloc(tab[size].dst_size);
			if (!myown_dst)
				return (free(expected_dst));
		}
		ft_memcpy(expected_dst, myown_dst, tab[size].dst_size);
		expected_ret = ft_strnlen(expected_dst, tab[size].size) + ft_strlen(tab[size].src);
		myown_ret = ft_strlcat(myown_dst, tab[size].src, tab[size].size);
		color = expected_ret == myown_ret && !ft_strncmp(expected_dst, myown_dst, tab[size].dst_size) ? GREEN : RED;

		printf("%s", color);
		printf("Input:   \t%s\n", tab[size].src);
		printf("Expected:\t(%lu) %.*s\n", expected_ret, (int)tab[size].dst_size, expected_dst);
		printf("Output:  \t(%lu) %.*s\n", myown_ret, (int)tab[size].dst_size, myown_dst);
		printf("%s", RESET_COLOR);

		ATF_CHECK(expected_ret == myown_ret && !ft_strncmp(expected_dst, myown_dst, tab[size].dst_size));
		printf("----------\n");

		free(expected_dst);
		free(myown_dst);
	}
}

// TEST 00 --> NULL STRINGS
ATF_TC(test00);
ATF_TC_HEAD(test00, tc)
{
	atf_tc_set_md_var(tc, "descr", tests_titles[0]);
}
ATF_TC_BODY(test00, tc)
{
	t_input	tab1[] = {
		{"", 0, 0, 0},
		{"241f2", 1, 0, 0},
		{"@", 0, 0, 1},
		{"", 1, 0, 1},
		{"\222", 10, 0, 10},
		{"\102\242\123", 10, 0, 1},
		{"fcjp3jpo3ijfnp3oijp3fp3hp3uthch", 100, 0, 10},
		{"~~~~ofijkj;kj:w", 10, 0, 100},
		{"44444444444444444444444444444444444444444444444444444444444444444444444444444444444.DEL2", 100, 0, 100},
	};
	t_input	tab2[] = {
		{"f8&KqZpL#9", 0, "f8&KqZpL#9", 0},
		{"TgY7w^pLk@2zR", 1, "TgY7w^pLk@2zR", 0},
		{"aP3$LmNzX!qRvT1oJ", 0, "aP3$LmNzX!qRvT1oJ", 1},
		{"xV8m#QwErTzYpLd9FhGjK", 1, "xV8m#QwErTzYpLd9FhGjK", 1},
		{"Zr7@qLpXyNwVt8sBmCkJdHf", 1, "Zr7@qLpXyNwVt8sBmCkJdHf", 10},
		{"mP2&nXvLqWtR9zYgFhJbCsTk4o", 10, "mP2&nXvLqWtR9zYgFhJbCsTk4o", 10},
		{"cL8$XpQzNrVwTgHfYjMkSaBdUiKo", 10, "cL8$XpQzNrVwTgHfYjMkSaBdUiKo", 1},
		{"hT1@qLpXyNwVt8sBmCkJdHfZr7pRvGjF", 100, "hT1@qLpXyNwVt8sBmCkJdHfZr7pRvGjF", 10},
		{"pR4#nXvLqWtR9zYgFhJbCsTkLmQaWmZoXt", 10, "pR4#nXvLqWtR9zYgFhJbCsTkLmQaWmZoXt", 100},
		{"jK9^xLpQwErTzYpLd9FhGjKmNaSbDcVtYwXr", 100, "jK9^xLpQwErTzYpLd9FhGjKmNaSbDcVtYwXr", 100},
	};

	i = 0;
	printf("\n<test%02d> %s\n", i, tests_titles[i]);
	test_nulls(tab1, NELEM(tab1), 0);
	test_nulls(tab1, NELEM(tab1), TEST_NULLS);
	test_nulls(tab2, NELEM(tab2), TEST_NULLS);
}

// TEST 01 --> EMPTY STRINGS
ATF_TC(test01);
ATF_TC_HEAD(test01, tc)
{
	atf_tc_set_md_var(tc, "descr", tests_titles[1]);
}
ATF_TC_BODY(test01, tc)
{
	t_input	tab[] = {
		{"", 0, "", 0},
		{"", 1, "", 0},
		{"???", 1, "", 1},
		{"", 10, "", 1},
		{"", 10, "", 10},
		{"", 1, "", 10},
		{"", 100, "", 10},
		{"1023o5ngf", 100, "", 100},
		{"f-oi3jf3-j", 10, "", 100},
		{"", 10000, "", 100},
		{"kj:w\n", 10000, "", 10000},
	};

	i = 1;
	test(tab, NELEM(tab));
}

// TEST 02 --> DEST BIGGER THAN SRC
ATF_TC(test02);
ATF_TC_HEAD(test02, tc)
{
	atf_tc_set_md_var(tc, "descr", tests_titles[2]);
}
ATF_TC_BODY(test02, tc)
{
	t_input	tab[] = {
		{ "æ¼¢å­—ðŸ˜€ðŸš€ðŸ”¥", 48291, "ðŸŒâœ¨ðŸ’§ðŸŒˆðŸ˜ƒðŸ˜„ðŸ˜", 92734 },
		{ "abcXYZÃ§Ð–Ñ‰Ð®", 123, "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ðŸ“ŠðŸ“ˆ", 99999 },
		{ "ðŸ˜€ðŸ˜ƒðŸ˜„ðŸ˜ê§à¼ºâœ¿à¼»ê§‚", 90812, "ðŸŽµðŸŽ¶ðŸŽ¼ðŸ¥ðŸŽ¹", 271 },
		{ "Ð–Ñ‰Ð®ÑÐÐ‡ÒÑª", 56789, "LoremIpsumÎ”ÎµÎ´Î¿Î¼Î­Î½Î±", 31415 },
		{ "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 777, "ã“ã‚“ã«ã¡ã¯ä¸–ç•ŒðŸŒŒðŸŒ ", 888 },
		{ "â†”â†•â†–â†—â†˜â†™â†©â†ª", 45001, "Â©Â®â„¢âœ“âœ”âœ–æ¼¢å­—", 67890 },
		{ "ãƒ†ã‚¹ãƒˆæ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ", 91324, "ðŸŒŒðŸŒ ðŸŒŸðŸ’«ðŸ”¥ðŸ’§", 1000 },
		{ "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 22222, "ê§à¼ºUnicodeà¼»ê§‚", 54321 },
		{ "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥ðŸ’§", 99999, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚", 11111 },
		{ "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 13579, "ðŸ¦„ðŸ‘¾ðŸ¤–ðŸ‘½ðŸ’€â˜ ï¸", 24680 },
		{ "ðŸ˜€æ¼¢å­—ãƒ†ã‚¹ãƒˆ", 20001, "ðŸŽ­ðŸŽ¨ðŸŽ¬ðŸŽ¤", 30002 },
		{ "ðŸŽ¼ðŸŽµðŸŽ¶", 30003, "âˆ‘âˆ†âˆâˆ«âˆš", 40004 },
		{ "â˜€â˜â„â˜‚â˜ƒ", 50007, "qwertyæ¼¢å­—Ð¶ÑˆÑŽÑðŸ˜€", 60008 },
		{ "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æ¸¬å®š123", 70011, "ðŸŽ¹ðŸ¥ðŸŽ¸", 80012 },
		{ "Î”Î¿ÎºÎ¹Î¼Î®Unicodeæ¼¢å­—", 90015, "Dataæ¸¬è©¦Ð¢ÐµÑÑ‚Ø§Ø®ØªØ¨Ø§Ø±", 100016 },
		{ "Â©Â®â„¢âœ“âœ”âœ–æ¼¢å­—", 12114, "Î´Î¸Î»Î¼Î½Î¾", 13115 },
		{ "ðŸ˜†ðŸ˜…ðŸ˜‚ðŸ¤£æ¼¢å­—", 15120, "ãƒ†ã‚¹ãƒˆ12345", 16121 },
		{ "ã“ã‚“ã«ã¡ã¯", 17124, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–ðŸ‘½", 18125 },
		{ "Ð–Ñ‰Ð®ÑÐÐ‡ÒÑª", 19128, "LoremIpsumðŸ˜€", 20129 },
		{ "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 21132, "Î”ÎµÎ´Î¿Î¼Î­Î½Î±Î£Ï…Î¼Î²Î¿Î»Î¿ÏƒÎµÎ¹ÏÎ¬", 22133 },
		{ "Ø·ÙŽØ¨Ù’Ø´ÙÙˆØ±ÙŽØ©", 23136, "à¤¨à¤®à¤¸à¥à¤¤à¥‡à¤­à¤¾à¤°à¤¤æ¼¢å­—", 24137 },
		{ "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 25140, "ABCDEFGHIJKLMNOPQRSTUVWXYZ", 26141 },
		{ "Â©Â®â„¢âœ“âœ”âœ–ðŸ˜ƒ", 27144, "ðŸ¦„ðŸ‘¾ðŸ¤–ðŸ‘½ðŸ’€â˜ ï¸", 28145 },
		{ "â†”â†•â†–â†—â†˜â†™â†©â†ªæ¼¢å­—", 29148, "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿Prueba", 30149 },
		{ "ðŸŽµðŸŽ¶ðŸŽ¼æ¼¢å­—ã‹ãª", 31152, "æ–‡å­—åˆ—ã®é•·ã•ã¯ãƒ†ã‚¹ãƒˆã§ã™", 32153 },
		{ "ðŸ‘‘ðŸ’Žâš”ï¸ðŸ›¡ï¸ðŸ¹ðŸŽ¯", 33156, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·æ¼¢å­—", 34157 },
		{ "Dataæ¸¬è©¦", 35160, "ðŸ€„ðŸŽ´ðŸƒæ¼¢å­—", 36161 },
		{ "abcdefg1234567", 37164, "ðŸŽ§ðŸŽ¼ðŸŽ¹", 38165 },
		{ "Ï€ÏÏƒÏ„Ï…Ï†æ¼¢å­—ÏˆÏ‰", 39168, "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥ðŸ’§", 40169 },
		{ "ãƒ†ã‚¹ãƒˆæ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ123", 41172, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—", 42173 },
		{ "Î”ÎµÎ´Î¿Î¼Î­Î½Î±æ¼¢å­—ðŸ˜€ðŸš€", 43176, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 44177 },
		{ "ê§à¼ºUnicodeà¼»ê§‚", 45178, "Lorem Ipsum ðŸŽ¶ðŸŽ¼", 46179 },
		{ "ðŸ”¥ðŸ’§ðŸŒˆâœ¨", 47180, "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ðŸš€ðŸŒ", 48181 },
		{ "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 49182, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 50183 },
		{ "ðŸŽ­ðŸŽ¨ðŸŽ¬ðŸŽ¤", 51184, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—ðŸ˜€", 52185 },
		{ "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥", 53186, "Â©Â®â„¢âœ“âœ”âœ–", 54187 },
		{ "abcdefghiæ¼¢å­—", 55188, "ðŸŽ¹ðŸ¥ðŸŽ¸ãƒ†ã‚¹ãƒˆ", 56189 },
		{ "à¤¨à¤®à¤¸à¥à¤¤à¥‡à¤­à¤¾à¤°à¤¤", 57190, "ê§à¼ºâœ¿à¼»ê§‚", 58191 },
		{ "â™ â™¥â™¦â™£â™ªâ™«â™¬âš¡", 59192, "ðŸ¦„ðŸ‘¾ðŸ¤–ðŸ‘½", 60193 },
		{ "ðŸŽ§ðŸŽ¼ðŸŽ¹ðŸ¥", 61194, "Î”ÎµÎ´Î¿Î¼Î­Î½Î±Î£Ï…Î¼Î²", 62195 },
		{ "Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰", 63196, "Dataæ¸¬è©¦Ð¢ÐµÑÑ‚", 64197 },
		{ "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æ¸¬å®š", 65198, "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 66199 },
		{ "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·æ¼¢å­—", 67200, "ðŸŽµðŸŽ¶ðŸŽ¼", 68201 },
		{ "Â©Â®â„¢âœ“âœ”âœ–", 69202, "ê§à¼ºUnicodeà¼»ê§‚", 70203 },
		{ "ðŸðŸ¢ðŸ¦ŽðŸ¦‚", 71204, "ðŸš€âœ¨ðŸŒðŸŽ¶", 72205 },
		{ "ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿12345", 73206, "Lorem Ipsumæ¼¢å­—", 74207 },
		{ "ðŸ˜†ðŸ˜…ðŸ˜‚ðŸ¤£", 75208, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 76209 },
		{ "ðŸŽ­ðŸŽ¨ðŸŽ¬", 77210, "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 78211 },
		{ "abcXYZ123Ã§", 79212, "Î”Î¿ÎºÎ¹Î¼Î®Unicodeæ¼¢å­—", 80213 },
		{ "ê§à¼ºâœ¿âœ¿à¼»ê§‚", 81214, "ðŸŽ§ðŸŽ¼ðŸŽ¹ðŸ¥", 82215 },
		{ "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥ðŸ’§", 83216, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 84217 },
		{ "Î”ÎµÎ´Î¿Î¼Î­Î½Î±æ¼¢å­—ðŸ˜€", 85218, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—", 86219 },
		{ "ãƒ†ã‚¹ãƒˆæ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ", 87220, "Lorem Ipsum ðŸŽ¼", 88221 },
		{ "Â©Â®â„¢âœ“âœ”âœ–", 89222, "ðŸŽ¹ðŸ¥ðŸŽ¸", 90223 },
		{ "æ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ123", 91224, "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 92225 },
		{ "ðŸŽµðŸŽ¶ðŸŽ¼", 93226, "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 94227 },
		{ "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 95228, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·æ¼¢å­—", 96229 },
		{ "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 97230, "ðŸ¦„ðŸ‘¾ðŸ¤–ðŸ‘½", 98231 },
		{ "Î”Î¿ÎºÎ¹Î¼Î®Unicode", 99232, "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿", 100233 },
		{ "ðŸŽ­ðŸŽ¨ðŸŽ¬ðŸŽ¤", 101234, "Â©Â®â„¢âœ“âœ”âœ–", 102235 },
		{ "Lorem Ipsumæ¼¢å­—", 103236, "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥", 104237 },
		{ "ê§à¼ºUnicodeà¼»ê§‚", 105238, "ðŸŽ§ðŸŽ¼ðŸŽ¹", 106239 },
		{ "ðŸðŸ¢ðŸ¦ŽðŸ¦‚", 107240, "Î”ÎµÎ´Î¿Î¼Î­Î½Î±Î£Ï…Î¼Î²", 108241 },
		{ "ðŸ”¥ðŸ’§ðŸŒˆâœ¨", 109242, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·æ¼¢å­—", 110243 },
		{ "ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿123", 111244, "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 112245 },
		{ "ðŸŽ¹ðŸ¥ðŸŽ¸", 113246, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 114247 },
		{ "abcXYZ123Ã§Ð–Ñ‰", 115248, "Lorem Ipsum ðŸ˜€", 116249 },
		{ "ðŸ‰ðŸ²ðŸ¦„", 117250, "ðŸš€âœ¨ðŸŒðŸŽ¶", 118251 },
		{ "Î©â‰ˆÃ§âˆšâˆ«ËœÂµ", 119252, "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 120253 },
		{ "ãƒ†ã‚¹ãƒˆæ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ123", 121254, "ðŸŽ­ðŸŽ¨ðŸŽ¬", 122255 },
		{ "Â©Â®â„¢âœ“âœ”âœ–æ¼¢å­—", 123256, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—ðŸ˜€", 124257 },
		{ "ðŸŽ§ðŸŽ¼ðŸŽ¹ðŸ¥", 125258, "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 126259 },
		{ "Î”ÎµÎ´Î¿Î¼Î­Î½Î±æ¼¢å­—", 127260, "ðŸŽµðŸŽ¶ðŸŽ¼æ¼¢å­—", 128261 },
		{ "ê§à¼ºâœ¿à¼»ê§‚", 129262, "Lorem Ipsum ðŸŽ¶", 130263 },
		{ "Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰", 131264, "ðŸŽ¹ðŸ¥ðŸŽ¸ãƒ†ã‚¹ãƒˆ", 132265 },
		{ "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 133266, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 134267 },
		{ "ðŸ”¥ðŸ’§ðŸŒˆ", 135268, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚", 136269 },
		{ "ãƒ†ã‚¹ãƒˆ12345", 137270, "ê§à¼ºUnicodeà¼»ê§‚", 138271 },
		{ "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 139272, "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥", 140273 },
		{ "Â©Â®â„¢âœ“âœ”âœ–ðŸ˜ƒ", 141274, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 142275 },
		{ "æ¼¢å­—ã‹ãªã‚«ã‚¿ã‚«ãƒŠ", 143276, "ðŸŽ§ðŸŽ¼ðŸŽ¹", 144277 },
		{ "ðŸŽ­ðŸŽ¨ðŸŽ¬ðŸŽ¤", 145278, "Î”ÎµÎ´Î¿Î¼Î­Î½Î±Î£Ï…Î¼Î²", 146279 },
		{ "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·æ¼¢å­—", 147280, "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 148281 },
		{ "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 149282, "ðŸŽµðŸŽ¶ðŸŽ¼", 150283 },
		{ "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿", 151284, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—", 152285 },
		{ "ðŸŽ¹ðŸ¥ðŸŽ¸", 153286, "Lorem Ipsum ðŸ˜€", 154287 },
		{ "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥ðŸ’§", 155288, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 156289 },
		{ "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 157290, "Â©Â®â„¢âœ“âœ”âœ–", 158291 },
		{ "Î”ÎµÎ´Î¿Î¼Î­Î½Î±æ¼¢å­—ðŸ˜€", 159292, "ðŸŽ§ðŸŽ¼ðŸŽ¹", 160293 },
		{ "ãƒ†ã‚¹ãƒˆæ¼¢å­—ã‚«ã‚¿ã‚«ãƒŠ", 161294, "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 162295 },
		{ "ðŸ”¥ðŸ’§ðŸŒˆâœ¨", 163296, "ðŸ‰ðŸ²ðŸ¦„ðŸ‘¾ðŸ¤–", 164297 },
		{ "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 165298, "Lorem Ipsum ðŸŽ¶", 166299 },
		{ "ê§à¼ºUnicodeà¼»ê§‚", 167300, "ðŸš€âœ¨ðŸŒðŸŽ¶", 168301 },
		{ "ðŸŽ­ðŸŽ¨ðŸŽ¬ðŸŽ¤", 169302, "ðŸðŸ¢ðŸ¦ŽðŸ¦‚æ¼¢å­—ðŸ˜€", 170303 },
		{ "ðŸ‰ðŸ²ðŸ¦„", 171304, "ðŸŒðŸš€âœ¨ðŸ”¥ðŸ’§", 172305 },
		{ "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æ¸¬å®š", 173306, "ðŸŽµðŸŽ¶ðŸŽ¼æ¼¢å­—", 174307 },
		{ "ðŸŽ§ðŸŽ¼ðŸŽ¹ðŸ¥", 175308, "Î©â‰ˆÃ§âˆšâˆ«ËœÂµâ‰¤â‰¥Ã·", 176309 },
		{ "Â©Â®â„¢âœ“âœ”âœ–", 177310, "ê§à¼ºâœ¿âš¡âœ¿à¼»ê§‚", 178311 },
		{ "ðŸŒŒðŸŒ ðŸŒŸðŸ’«", 179312, "ðŸš€âœ¨ðŸŒðŸŽ¶ðŸ”¥", 180313 }
	};

	i = 2;
	test(tab, NELEM(tab));
}

// TEST 03 --> BIG STRINGS
ATF_TC(test03);
ATF_TC_HEAD(test03, tc)
{
	atf_tc_set_md_var(tc, "descr", tests_titles[3]);
}
ATF_TC_BODY(test03, tc)
{
	t_input	tab[] = {
		{ "\123\045\177\200\011\377\044\066\101\222\144\033", 48291, "\377\200\056\145\076\211\077\300\177", 92734 },
		{ "\011\022\033\044\055\066\077\110\121\132\143\154\165", 123, "\374\363\352\341\330\317\306\275\264\253\242", 99999 },
		{ "\001\002\003\004\005\006\007\010\011\012\013\014", 90812, "\377\376\375\374\373\372\371\370\367\366", 271 },
		{ "\200\201\202\203\204\205\206\207\210\211\212", 56789, "\001\377\002\376\003\375\004\374\005\373", 31415 },
		{ "\011\022\033\044\055\066\077\110\121", 777, "\374\363\352\341\330\317\306\275\264", 888 },
		{ "\123\234\345\056\077\111\222\333\144\055", 45001, "\111\076\211\077\300\177\012\033\044", 67890 },
		{ "\044\055\066\077\100\111\122\133\144\155\166\177", 91324, "\012\033\044\155\166\201\255\377\300", 1000 },
		{ "\001\377\123\045\177\200\011", 22222, "\321\332\343\354\365\376\277\266\255", 54321 },
		{ "\200\177\176\175\174\173\172", 99999, "\011\012\013\014\015\016\017\020", 11111 },
		{ "\300\301\302\303\304\305\306\307\310\311\312", 13579, "\377\375\373\371\367\365\363\361", 24680 },
		{ "\011\021\031\041\051\061\071\101", 20001, "\220\221\222\223\224\225\226\227\230", 30002 },
		{ "\333\344\355\366\377\011\022\033\044\055", 30003, "\010\020\030\040\050\060\070\100\110", 40004 },
		{ "\301\302\303\304\305\306", 50007, "\277\266\255\244\233\222\211\200", 60008 },
		{ "\010\011\012\013\014\015\016\017", 70011, "\360\361\362\363\364\365\366\367", 80012 },
		{ "\033\044\055\066\077\110\121\132\143", 90015, "\220\221\222\223\224\225\226\227", 100016 },
		{ "\050\051\052\053\054\055\056\057\060\061", 12114, "\345\346\347\350\351\352\353\354", 13115 },
		{ "\020\021\022\023\024\025", 15120, "\270\271\272\273\274\275\276\277", 16121 },
		{ "\100\101\102\103\104", 17124, "\200\201\202\203\204\205", 18125 },
		{ "\011\012\013\014\015\016\017\020", 19128, "\377\376\375\374\373\372", 20129 },
		{ "\220\221\222\223\224\225\226\227", 21132, "\010\011\012\013\014\015\016\017", 22133 },
		{ "\301\302\303\304\305\306\307\310", 23136, "\044\055\066\077\100\111\122\133", 24137 },
		{ "\123\124\125\126\127\130\131", 25140, "\240\241\242\243\244\245\246", 26141 },
		{ "\144\145\146\147\150\151\152\153\154\155", 27144, "\060\061\062\063\064\065\066\067", 28145 },
		{ "\011\022\033\044\055", 29148, "\374\363\352\341\330\317\306", 30149 },
		{ "\177\176\175\174\173\172\171", 31152, "\110\111\112\113\114\115\116", 32153 },
		{ "\220\221\222\223\224\225\226\227\230", 33156, "\001\002\003\004\005\006\007\010\011", 34157 },
		{ "\060\061\062\063\064\065", 35160, "\377\376\375\374\373\372\371", 36161 },
		{ "\033\034\035\036\037\040\041", 37164, "\210\211\212\213\214\215\216\217", 38165 },
		{ "\222\223\224\225\226\227", 39168, "\044\055\066\077\100\111", 40169 },
		{ "\300\277\276\275\274", 41172, "\050\051\052\053\054\055\056", 42173 },
		{ "\110\120\130\140\150\160\170", 43176, "\177\176\175\174\173\172", 44177 },
		{ "\220\221\222\223\224\225", 45178, "\010\020\030\040\050\060\070\100", 46179 },
		{ "\011\012\013\014\015\016", 47180, "\364\363\362\361\360\357\356\355", 48181 },
		{ "\260\261\262\263\264\265\266", 49182, "\070\071\072\073\074\075\076\077", 50183 },
		{ "\100\101\102\103\104\105\106\107", 51184, "\110\111\112\113\114\115\116", 52185 },
		{ "\122\123\124\125\126\127\130\131", 53186, "\377\376\375\374\373\372\371\370", 54187 },
		{ "\033\034\035\036\037\040\041\042", 55188, "\300\301\302\303\304\305\306\307", 56189 },
		{ "\200\201\202\203\204\205", 57190, "\123\124\125\126\127\130\131", 58191 },
		{ "\177\176\175\174\173", 59192, "\111\112\113\114\115\116\117", 60193 },
		{ "\001\002\003\004\005\006", 61194, "\370\371\372\373\374\375\376\377", 62195 },
		{ "\220\221\222\223\224\225\226", 63196, "\011\022\033\044\055\066\077\110", 64197 },
		{ "\333\334\335\336\337\340", 65198, "\123\234\345\056\077\111\222", 66199 },
		{ "\011\012\013\014\015", 67200, "\240\241\242\243\244\245\246\247", 68201 },
		{ "\100\111\122\133\144", 69202, "\070\071\072\073\074\075\076\077", 70203 },
		{ "\177\176\175\174\173\172\171", 71204, "\200\201\202\203\204\205\206", 72205 },
		{ "\001\377\002\376\003\375\004", 73206, "\377\200\056\145\076\211\077", 74207 },
		{ "\011\022\033\044\055", 75208, "\374\363\352\341\330", 76209 },
		{ "\123\124\125\126\127", 77210, "\250\251\252\253\254\255\256", 78211 },
		{ "\177\200\201\202\203", 79212, "\060\061\062\063\064\065\066", 80213 },
		{ "\110\111\112\113\114\115", 81214, "\044\055\066\077\100\111\122", 82215 },
		{ "\222\223\224\225\226", 83216, "\033\034\035\036\037\040", 84217 },
		{ "\070\071\072\073\074\075\076\077", 85218, "\177\176\175\174\173\172\171\170", 86219 },
		{ "\001\002\003\004\005", 87220, "\200\201\202\203\204\205", 88221 },
		{ "\110\120\130\140\150", 89222, "\344\345\346\347\350\351", 90223 },
		{ "\011\012\013\014\015", 91224, "\123\124\125\126\127\130", 92225 },
		{ "\060\061\062\063\064\065", 93226, "\177\176\175\174\173\172", 94227 },
		{ "\177\200\201\202\203", 95228, "\044\055\066\077\100\111", 96229 },
		{ "\010\020\030\040\050\060", 97230, "\120\121\122\123\124\125", 98231 },
		{ "\333\334\335\336\337", 99232, "\177\176\175\174\173", 100233 },
		{ "\100\111\122\133\144", 101234, "\060\061\062\063\064\065", 102235 },
		{ "\220\221\222\223\224", 103236, "\344\345\346\347\350\351", 104237 },
		{ "\177\176\175\174\173", 105238, "\110\111\112\113\114\115", 106239 },
		{ "\011\012\013\014\015", 107240, "\200\201\202\203\204\205", 108241 },
		{ "\060\061\062\063\064", 109242, "\177\200\201\202\203", 110243 },
		{ "\333\334\335\336\337", 111244, "\120\121\122\123\124", 112245 },
		{ "\044\055\066\077\100", 113246, "\344\345\346\347\350", 114247 },
		{ "\177\176\175\174\173", 115248, "\110\111\112\113\114", 116249 },
		{ "\011\012\013\014\015", 117250, "\200\201\202\203\204", 118251 },
		{ "\060\061\062\063\064", 119252, "\177\200\201\202\203", 120253 },
		{ "\333\334\335\336\337", 121254, "\120\121\122\123\124", 122255 },
		{ "\044\055\066\077\100", 123256, "\344\345\346\347\350", 124257 },
		{ "\177\176\175\174\173", 125258, "\110\111\112\113\114", 126259 },
		{ "\011\012\013\014\015", 127260, "\200\201\202\203\204", 128261 },
		{ "\060\061\062\063\064", 129262, "\177\200\201\202\203", 130263 },
		{ "\333\334\335\336\337", 131264, "\120\121\122\123\124", 132265 },
		{ "\044\055\066\077\100", 133266, "\344\345\346\347\350", 134267 },
		{ "\177\176\175\174\173", 135268, "\110\111\112\113\114", 136269 },
		{ "\011\012\013\014\015", 137270, "\200\201\202\203\204", 138271 },
		{ "\060\061\062\063\064", 139272, "\177\200\201\202\203", 140273 },
		{ "\333\334\335\336\337", 141274, "\120\121\122\123\124", 142275 },
		{ "\044\055\066\077\100", 143276, "\344\345\346\347\350", 144277 },
		{ "\177\176\175\174\173", 145278, "\110\111\112\113\114", 146279 },
		{ "\011\012\013\014\015", 147280, "\200\201\202\203\204", 148281 },
		{ "\060\061\062\063\064", 149282, "\177\200\201\202\203", 150283 },
		{ "\333\334\335\336\337", 151284, "\120\121\122\123\124", 152285 },
		{ "\044\055\066\077\100", 153286, "\344\345\346\347\350", 154287 },
		{ "\177\176\175\174\173", 155288, "\110\111\112\113\114", 156289 },
		{ "\011\012\013\014\015", 157290, "\200\201\202\203\204", 158291 },
		{ "\060\061\062\063\064", 159292, "\177\200\201\202\203", 160293 },
		{ "\333\334\335\336\337", 161294, "\120\121\122\123\124", 162295 },
		{ "\044\055\066\077\100", 163296, "\344\345\346\347\350", 164297 },
		{ "\177\176\175\174\173", 165298, "\110\111\112\113\114", 166299 },
		{ "\011\012\013\014\015", 167300, "\200\201\202\203\204", 168301 },
		{ "\060\061\062\063\064", 169302, "\177\200\201\202\203", 170303 },
		{ "\333\334\335\336\337", 171304, "\120\121\122\123\124", 172305 },
		{ "\044\055\066\077\100", 173306, "\344\345\346\347\350", 174307 },
		{ "\177\176\175\174\173", 175308, "\110\111\112\113\114", 176309 },
		{ "\011\012\013\014\015", 177310, "\200\201\202\203\204", 178311 },
		{ "\060\061\062\063\064", 179312, "\177\200\201\202\203", 180313 }
	};

	i = 3;
	test(tab, NELEM(tab));
}

// TEST 04 --> SRC BIGGER THAN DEST
ATF_TC(test04);
ATF_TC_HEAD(test04, tc)
{
	atf_tc_set_md_var(tc, "descr", tests_titles[4]);
}
ATF_TC_BODY(test04, tc)
{
	t_input	tab[] = {
		{ "\001\002\003\004\005\006", 5, "\011\012\013\014\015\016\017", 6 },
		{ "\020\021\022\023\024\025", 4, "\030\031\032\033\034\035", 5 },
		{ "\040\041\042\043\044\045\046", 6, "\047\050\051\052\053\054\055", 7 },
		{ "\056\057\060\061\062\063\064", 5, "\065\066\067\070\071\072\073\074", 7 },
		{ "\075\076\077\100\101\102\103\104", 7, "\105\106\107\110\111\112\113", 6 },
		{ "\114\115\116\117\120\121\122\123\124", 8, "\125\126\127\130\131\132\133", 6 },
		{ "\134\135\136\137\140\141\142", 5, "\143\144\145\146\147\150", 4 },
		{ "\151\152\153\154\155\156\157\160\161", 8, "\162\163\164\165\166\167\170", 7 },
		{ "\171\172\173\174\175\176\177\200", 7, "\201\202\203\204\205\206\207", 6 },
		{ "\210\211\212\213\214\215\216\217\220\221", 9, "\222\223\224\225\226\227", 5 },
		{ "\230\231\232\233\234\235", 5, "\236\237\240\241\242\243", 6 },
		{ "\244\245\246\247\250\251\252\253", 7, "\254\255\256\257\260\261\262", 6 },
		{ "\263\264\265\266\267\270\271", 5, "\272\273\274\275\276\277", 4 },
		{ "\300\301\302\303\304\305\306\307", 7, "\310\311\312\313\314\315\316", 6 },
		{ "\317\320\321\322\323\324\325", 5, "\326\327\330\331\332\333\334\335", 7 },
		{ "\336\337\340\341\342\343", 4, "\344\345\346\347\350\351\352", 6 },
		{ "\353\354\355\356\357\360\361\362", 7, "\363\364\365\366\367\370\371", 6 },
		{ "\372\373\374\375\376\377\001\002", 7, "\003\004\005\006\007\010", 5 },
		{ "\011\012\013\014\015\016\017\020", 7, "\021\022\023\024\025\026", 5 },
		{ "\027\030\031\032\033\034\035\036\037\040", 9, "\041\042\043\044\045\046\047", 6 },
		{ "\050\051\052\053\054\055", 5, "\056\057\060\061\062\063", 6 },
		{ "\064\065\066\067\070\071\072\073", 7, "\074\075\076\077\100\101", 5 },
		{ "\102\103\104\105\106\107", 4, "\110\111\112\113\114\115\116", 6 },
		{ "\117\120\121\122\123\124\125", 6, "\126\127\130\131\132\133\134", 7 },
		{ "\135\136\137\140\141\142", 4, "\143\144\145\146\147\150", 5 },
		{ "\151\152\153\154\155\156\157", 5, "\160\161\162\163\164\165\166", 6 },
		{ "\167\170\171\172\173\174", 4, "\175\176\177\200\201\202", 5 },
		{ "\203\204\205\206\207\210\211", 5, "\212\213\214\215\216\217\220", 6 },
		{ "\221\222\223\224\225\226", 4, "\227\230\231\232\233\234", 5 },
		{ "\235\236\237\240\241\242\243\244", 7, "\245\246\247\250\251\252", 5 },
		{ "\253\254\255\256\257\260", 4, "\261\262\263\264\265\266\267", 6 },
		{ "\270\271\272\273\274\275\276", 5, "\277\300\301\302\303\304", 4 },
		{ "\305\306\307\310\311\312", 4, "\313\314\315\316\317\320\321", 6 },
		{ "\322\323\324\325\326\327", 4, "\330\331\332\333\334\335", 5 },
		{ "\336\337\340\341\342\343\344", 5, "\345\346\347\350\351\352", 4 },
		{ "\353\354\355\356\357\360", 4, "\361\362\363\364\365\366", 5 },
		{ "\367\370\371\372\373\374\375", 5, "\376\377\001\002\003\004", 4 },
		{ "\005\006\007\010\011\012\013", 6, "\014\015\016\017\020\021", 5 },
		{ "\022\023\024\025\026\027\030\031", 7, "\032\033\034\035\036\037", 6 },
		{ "\040\041\042\043\044\045", 4, "\046\047\050\051\052\053", 5 },
	};
	
	i = 4;
	test(tab, NELEM(tab));
}

// TEST PROGRAM
ATF_TP_ADD_TCS(tp)
{
	ATF_TP_ADD_TC(tp, test00);
	ATF_TP_ADD_TC(tp, test01);
	ATF_TP_ADD_TC(tp, test02);
	ATF_TP_ADD_TC(tp, test03);
	ATF_TP_ADD_TC(tp, test04);

	return (atf_no_error());
}
